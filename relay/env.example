# ============================================================================
# SHOGUN RELAY - PROVIDER CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your values
# See PROVIDER_GUIDE.md for detailed documentation
# ============================================================================

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Admin password - used for API authentication and dashboard access
# Generate with: openssl rand -hex 32
ADMIN_PASSWORD=your_secure_admin_password_here

# ============================================================================
# RELAY IDENTITY
# ============================================================================

# Public hostname or IP address (required for network discovery)
RELAY_HOST=localhost

# HTTP port for the relay server
RELAY_PORT=8765

# Display name for your relay (shown in network listings)
RELAY_NAME=MyRelay

# ============================================================================
# IPFS CONFIGURATION
# ============================================================================

# IPFS API endpoint (default: local IPFS daemon)
IPFS_API_URL=http://127.0.0.1:5001

# IPFS Gateway for content retrieval
IPFS_GATEWAY_URL=http://127.0.0.1:8080

# Optional: JWT token for IPFS API authentication
# IPFS_API_TOKEN=

# Optional: Timeout for IPFS pin operations (in milliseconds)
# Default: 120000 (2 minutes). Increase if you frequently encounter timeout errors.
# IPFS_PIN_TIMEOUT_MS=120000

# ============================================================================
# GUNDB CONFIGURATION
# ============================================================================

# GunDB relay user credentials (for owning subscription data)
# REQUIRED: Direct SEA Keypair (prevents "Signature did not match" errors)
# Generate with: node scripts/generate-relay-keys.js
# Then add the JSON to one of these:
#   RELAY_SEA_KEYPAIR='{"pub":"...","priv":"...","epub":"...","epriv":"..."}'
#   OR
#   RELAY_SEA_KEYPAIR_PATH=/path/to/relay-keypair.json
#
# The relay MUST have a keypair configured, otherwise it will not start properly

# Comma-separated list of peer relays to sync with
# RELAY_PEERS=https://other-relay.com/gun,https://another-relay.com/gun

# Require admin token for Gun writes (recommended: true)
RELAY_PROTECTED=true

# Storage type for GunDB persistence
# Options: "sqlite" (default, uses SQLite database) or "radisk" (uses file-based storage)
# SQLite provides better performance and reliability
STORAGE_TYPE=sqlite

# Enable RADISK persistence (recommended: true)
# Set to true to disable for debugging
DISABLE_RADISK=false

# Auto-cleanup corrupted data on startup
CLEANUP_CORRUPTED_DATA=false

# ============================================================================
# ON-CHAIN REGISTRY (Required for earning revenue)
# ============================================================================

# Your wallet private key for on-chain operations
# Used for: registration, staking, deal registration
# WARNING: Keep this secret! Never commit to git!
# Generate new wallet: node -e "console.log(require('ethers').Wallet.createRandom().privateKey)"
RELAY_PRIVATE_KEY=0x_your_private_key_here

# Chain ID for the registry contract
# 84532 = Base Sepolia (testnet) - use for testing
# 8453  = Base Mainnet - use for production
REGISTRY_CHAIN_ID=84532

# ============================================================================
# X402 PAYMENT CONFIGURATION (Required for earning revenue)
# ============================================================================

# Your wallet address to receive payments
# This is where subscription and deal payments will be sent
X402_PAY_TO_ADDRESS=0x_your_wallet_address_here

# Private key for settling payments
# Can be same as RELAY_PRIVATE_KEY or different
# Needs ETH for gas when using 'direct' settlement
X402_PRIVATE_KEY=0x_your_private_key_here

# Blockchain network for payments
# Options: base-sepolia (testnet), base (mainnet)
X402_NETWORK=base-sepolia

# Settlement mode
# 'facilitator' - Uses x402.org service (no gas needed, depends on service)
# 'direct'      - Settle locally (full control, needs ETH for gas)
X402_SETTLEMENT_MODE=direct

# Optional: Custom facilitator URL (default: https://x402.org/facilitator)
# X402_FACILITATOR_URL=https://x402.org/facilitator

# Optional: Facilitator API key if required
# X402_FACILITATOR_API_KEY=

# Optional: Custom RPC URL (defaults to public RPC)
# X402_RPC_URL=https://your-rpc-url

# ============================================================================
# PRICING CONFIGURATION
# ============================================================================

# Storage Deals Pricing (per MB per month in USDC)
# DEAL_PRICE_STANDARD=0.0001      # Standard tier price per MB/month
# DEAL_PRICE_PREMIUM=0.0002       # Premium tier price per MB/month
# DEAL_PRICE_ENTERPRISE=0.0005    # Enterprise tier price per MB/month

# Deal size and duration limits
# DEAL_MIN_SIZE_MB=0.001          # Minimum file size (1 KB)
# DEAL_MAX_SIZE_MB=1000           # Maximum file size for standard tier
# DEAL_MIN_DURATION_DAYS=7        # Minimum deal duration
# DEAL_MAX_DURATION_DAYS=365      # Maximum deal duration for standard tier

# Premium/Enterprise replication factors
# DEAL_PREMIUM_REPLICATION=3      # Replication factor for premium tier
# DEAL_ENTERPRISE_REPLICATION=5   # Replication factor for enterprise tier

# Subscription Pricing (one-time payment in USDC)
# SUB_BASIC_PRICE=0.001           # Basic subscription price
# SUB_BASIC_STORAGE_MB=100        # Basic subscription storage (MB)
# SUB_STANDARD_PRICE=0.004        # Standard subscription price
# SUB_STANDARD_STORAGE_MB=500     # Standard subscription storage (MB)
# SUB_PREMIUM_PRICE=0.01          # Premium subscription price
# SUB_PREMIUM_STORAGE_MB=2000     # Premium subscription storage (MB)
# SUB_DURATION_DAYS=30            # Subscription duration (days)

# ============================================================================
# STORAGE LIMITS
# ============================================================================

# Maximum total storage available on this relay (in GB)
# If not set or 0, no global limit is enforced
RELAY_MAX_STORAGE_GB=10

# Warning threshold percentage (default 80%)
# Users will be warned when relay storage exceeds this percentage
RELAY_STORAGE_WARNING_THRESHOLD=80

# ============================================================================
# NETWORK FEDERATION
# ============================================================================

# Automatically pin content from network pin requests
# Helps with data redundancy across the network
AUTO_REPLICATION=true

# ============================================================================
# HOLSTER RELAY (WebSocket enhancement)
# ============================================================================

# Holster relay host address
HOLSTER_RELAY_HOST=0.0.0.0

# Holster relay port (default: RELAY_PORT + 1)
# HOLSTER_RELAY_PORT=8766

# Enable persistent storage for Holster
HOLSTER_RELAY_STORAGE=true

# Path for Holster data
HOLSTER_RELAY_STORAGE_PATH=./holster-data

# Maximum connections for Holster
HOLSTER_MAX_CONNECTIONS=100

# ============================================================================
# ADVANCED OPTIONS
# ============================================================================

# Data directory for RADISK persistence
DATA_DIR=./data

# Enable QR code generation
RELAY_QR=false

# Enable file storage
RELAY_STORE=true

# Public path
RELAY_PATH=public
