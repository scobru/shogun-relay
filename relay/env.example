# ============================================================================
# SHOGUN RELAY - PROVIDER CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your values
# See PROVIDER_GUIDE.md for detailed documentation
# ============================================================================

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Admin password - used for API authentication and dashboard access
# Generate with: openssl rand -hex 32
ADMIN_PASSWORD=your_secure_admin_password_here

# ============================================================================
# RELAY IDENTITY
# ============================================================================

# Public hostname or IP address (required for network discovery)
RELAY_HOST=localhost

# HTTP port for the relay server
RELAY_PORT=8765

# Display name for your relay (shown in network listings)
RELAY_NAME=MyRelay

# Welcome message displayed on root endpoint
WELCOME_MESSAGE="*** WELCOME TO SHOGUN RELAY ***"

# ============================================================================
# FEATURE FLAGS (Enable/Disable Modules)
# ============================================================================

IPFS_ENABLED=true
WORMHOLE_ENABLED=true

# ============================================================================
# IPFS CONFIGURATION
# ============================================================================

# IPFS API endpoint (default: local IPFS daemon)
IPFS_API_URL=http://127.0.0.1:5001

# IPFS Gateway for content retrieval
IPFS_GATEWAY_URL=http://127.0.0.1:8080

# Optional: JWT token for IPFS API authentication
# IPFS_API_TOKEN=

# Optional: Timeout for IPFS pin operations (in milliseconds)
# Default: 120000 (2 minutes). Increase if you frequently encounter timeout errors.
IPFS_PIN_TIMEOUT_MS=120000

# ============================================================================
# GUNDB CONFIGURATION
# ============================================================================

# GunDB relay user credentials (for owning subscription data)
# REQUIRED: Direct SEA Keypair (prevents "Signature did not match" errors)
# Generate with: node scripts/generate-relay-keys.js
# Then add the JSON to one of these:
#   RELAY_SEA_KEYPAIR='{"pub":"...","priv":"...","epub":"...","epriv":"..."}'
#   OR
#   RELAY_SEA_KEYPAIR_PATH=/path/to/relay-keypair.json
#
# The relay MUST have a keypair configured, otherwise it will not start properly

# Comma-separated list of peer relays to sync with
# RELAY_PEERS=https://other-relay.com/gun,https://another-relay.com/gun

# Require admin token for Gun writes (recommended: true)
RELAY_PROTECTED=true

# Storage type for GunDB persistence
# Options: "sqlite" (default), "radisk" (file-based), or "s3" (S3/MinIO)
# SQLite provides better performance and reliability
STORAGE_TYPE=sqlite

# Enable RADISK persistence (recommended: true)
# Set to true to disable for debugging
DISABLE_RADISK=false

# Auto-cleanup corrupted data on startup
CLEANUP_CORRUPTED_DATA=false

# Data directory for RADISK persistence
DATA_DIR=./data

# ============================================================================
# S3/MINIO STORAGE FOR GUN (Optional)
# ============================================================================
# Enable S3 storage with STORAGE_TYPE=  
# By default, uses same credentials as Drive MinIO config
# Override with GUN_S3_* variables for separate bucket/credentials

# GUN_S3_ENDPOINT=https://your-minio-server.com
# GUN_S3_ACCESS_KEY=your-access-key
# GUN_S3_SECRET_KEY=your-secret-key
# GUN_S3_BUCKET=shogun-gun-data
# GUN_S3_REGION=us-east-1


# ============================================================================
# WORMHOLE SERVICE (P2P Transfers)
# ============================================================================

# Enable Wormhole service
WORMHOLE_ENABLED=true

# Cleanup configuration
WORMHOLE_CLEANUP_ENABLED=true
WORMHOLE_CLEANUP_INTERVAL_MS=3600000
WORMHOLE_MAX_AGE_SECS=86400

# ============================================================================
# STORAGE LIMITS
# ============================================================================

# Maximum total storage available on this relay (in GB)
# If not set or 0, no global limit is enforced
RELAY_MAX_STORAGE_GB=10

# Warning threshold percentage (default 80%)
# Users will be warned when relay storage exceeds this percentage
RELAY_STORAGE_WARNING_THRESHOLD=80

# ============================================================================
# NETWORK FEDERATION
# ============================================================================

# Automatically pin content from network pin requests
# Helps with data redundancy across the network
AUTO_REPLICATION=true

# ============================================================================
# DRIVE SERVICE
# ============================================================================

# Directory for general file storage (File Manager)
DRIVE_DATA_DIR=./data/drive


# ============================================================================
# LOGGING & DEBUG
# ============================================================================

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Enable debug mode
DEBUG=false

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# CORS Configuration
# Comma-separated list of allowed origins (use * for development only)
# CORS_ORIGINS=https://myapp.com,https://admin.myapp.com
CORS_ORIGINS=*

# Allow credentials (cookies, auth headers) in CORS requests
CORS_CREDENTIALS=false

# Enforce strict session IP binding (recommended: true)
STRICT_SESSION_IP=true
