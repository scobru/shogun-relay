# ============================================================================
# SHOGUN RELAY - PROVIDER CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your values
# See PROVIDER_GUIDE.md for detailed documentation
# ============================================================================

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Admin password - used for API authentication and dashboard access
# Generate with: openssl rand -hex 32
ADMIN_PASSWORD=your_secure_admin_password_here

# ============================================================================
# RELAY IDENTITY
# ============================================================================

# Public hostname or IP address (required for network discovery)
RELAY_HOST=localhost

# HTTP port for the relay server
RELAY_PORT=8765

# Display name for your relay (shown in network listings)
RELAY_NAME=MyRelay

# Welcome message displayed on root endpoint
WELCOME_MESSAGE="*** WELCOME TO SHOGUN RELAY ***"

# ============================================================================
# FEATURE FLAGS (Enable/Disable Modules)
# ============================================================================

IPFS_ENABLED=true
HOLSTER_ENABLED=true
X402_ENABLED=true
REGISTRY_ENABLED=true
DEALS_ENABLED=true
DEAL_SYNC_ENABLED=true
WORMHOLE_ENABLED=true
TORRENT_ENABLED=true

# ============================================================================
# IPFS CONFIGURATION
# ============================================================================

# IPFS API endpoint (default: local IPFS daemon)
IPFS_API_URL=http://127.0.0.1:5001

# IPFS Gateway for content retrieval
IPFS_GATEWAY_URL=http://127.0.0.1:8080

# Optional: JWT token for IPFS API authentication
# IPFS_API_TOKEN=

# Optional: Timeout for IPFS pin operations (in milliseconds)
# Default: 120000 (2 minutes). Increase if you frequently encounter timeout errors.
IPFS_PIN_TIMEOUT_MS=120000

# ============================================================================
# GUNDB CONFIGURATION
# ============================================================================

# GunDB relay user credentials (for owning subscription data)
# REQUIRED: Direct SEA Keypair (prevents "Signature did not match" errors)
# Generate with: node scripts/generate-relay-keys.js
# Then add the JSON to one of these:
#   RELAY_SEA_KEYPAIR='{"pub":"...","priv":"...","epub":"...","epriv":"..."}'
#   OR
#   RELAY_SEA_KEYPAIR_PATH=/path/to/relay-keypair.json
#
# The relay MUST have a keypair configured, otherwise it will not start properly

# Comma-separated list of peer relays to sync with
# RELAY_PEERS=https://other-relay.com/gun,https://another-relay.com/gun

# Require admin token for Gun writes (recommended: true)
RELAY_PROTECTED=true

# Storage type for GunDB persistence
# Options: "sqlite" (default), "radisk" (file-based), or "s3" (S3/MinIO)
# SQLite provides better performance and reliability
STORAGE_TYPE=sqlite

# Enable RADISK persistence (recommended: true)
# Set to true to disable for debugging
DISABLE_RADISK=false

# Auto-cleanup corrupted data on startup
CLEANUP_CORRUPTED_DATA=false

# Data directory for RADISK persistence
DATA_DIR=./data

# ============================================================================
# S3/MINIO STORAGE FOR GUN (Optional)
# ============================================================================
# Enable S3 storage with STORAGE_TYPE=s3
# By default, uses same credentials as Drive MinIO config
# Override with GUN_S3_* variables for separate bucket/credentials

# GUN_S3_ENDPOINT=https://your-minio-server.com
# GUN_S3_ACCESS_KEY=your-access-key
# GUN_S3_SECRET_KEY=your-secret-key
# GUN_S3_BUCKET=shogun-gun-data
# GUN_S3_REGION=us-east-1


# ============================================================================
# ON-CHAIN REGISTRY CONFIGURATION (Multi-Chain)
# ============================================================================

# Your wallet private key for on-chain operations
# Used for: registration, staking, deal registration
# WARNING: Keep this secret! Never commit to git!
# Generate new wallet: node -e "console.log(require('ethers').Wallet.createRandom().privateKey)"
RELAY_PRIVATE_KEY=0x_your_private_key_here

# Supported networks for Registry operations (comma-separated)
# Available: base-sepolia, base, sepolia, mainnet, arbitrum, arbitrum-sepolia, 
#            optimism, optimism-sepolia, polygon, polygon-amoy
REGISTRY_NETWORKS=base-sepolia,base

# Default network for Registry operations (must be in REGISTRY_NETWORKS)
REGISTRY_DEFAULT_NETWORK=base-sepolia

# ============================================================================
# GLOBAL RPC CONFIGURATION
# ============================================================================
# Define RPC URLs globally here. Services (X402, Deals, Registry) will automatically
# use the correct RPC based on their configured network.
#
# Override priority: Service-Specific Variable > Global Variable > Default Public RPC
#
# Example Global RPCs:
# BASE_SEPOLIA_RPC=https://sepolia.base.org
# BASE_RPC=https://mainnet.base.org
# SEPOLIA_RPC=https://rpc.sepolia.org
# MAINNET_RPC=https://eth.public-rpc.com
# ARBITRUM_RPC=https://arb1.arbitrum.io/rpc
# ARBITRUM_SEPOLIA_RPC=https://sepolia-rollup.arbitrum.io/rpc
# OPTIMISM_RPC=https://mainnet.optimism.io
# OPTIMISM_SEPOLIA_RPC=https://sepolia.optimism.io
# POLYGON_RPC=https://polygon-rpc.com
# POLYGON_AMOY_RPC=https://rpc-amoy.polygon.technology

# ============================================================================
# X402 PAYMENT CONFIGURATION (Required for earning revenue)
# ============================================================================

# Your wallet address to receive payments
# This is where subscription and deal payments will be sent
X402_PAY_TO_ADDRESS=0x_your_wallet_address_here

# Private key for settling payments
# Can be same as RELAY_PRIVATE_KEY or different
# Needs ETH for gas when using 'direct' settlement
X402_PRIVATE_KEY=0x_your_private_key_here

# Supported networks for X402 payments (comma-separated)
# Available: base-sepolia, base, sepolia, mainnet, arbitrum, arbitrum-sepolia, 
#            optimism, optimism-sepolia, polygon, polygon-amoy
X402_NETWORKS=base-sepolia,base

# Default network for X402 payments (must be in X402_NETWORKS)
X402_DEFAULT_NETWORK=base-sepolia

# Settlement mode
# 'facilitator' - Uses x402.org service (no gas needed, depends on service)
# 'direct'      - Settle locally (full control, needs ETH for gas)
X402_SETTLEMENT_MODE=direct

# Optional: Custom facilitator URL (default: https://x402.org/facilitator)
# X402_FACILITATOR_URL=https://x402.org/facilitator

# Optional: Facilitator API key if required
# X402_FACILITATOR_API_KEY=


# ============================================================================
# DEALS CONFIGURATION (Storage Deals)
# ============================================================================

# Supported networks for Storage Deals (comma-separated)
# Available: base-sepolia, base, sepolia, mainnet, arbitrum, arbitrum-sepolia, 
#            optimism, optimism-sepolia, polygon, polygon-amoy
DEALS_NETWORKS=base-sepolia,base

# Default network for Storage Deals (must be in DEALS_NETWORKS)
DEALS_DEFAULT_NETWORK=base-sepolia

# Deal Sync settings
DEAL_SYNC_INTERVAL_MS=300000
DEAL_SYNC_FAST_INTERVAL_MS=120000
DEAL_SYNC_INITIAL_DELAY_MS=30000

# ============================================================================
# TORRENT MANAGER (Anna's Archive & DHT)
# ============================================================================

# Enable or disable Torrent functionality
TORRENT_ENABLED=true

# URL for Anna's Archive torrent source
TORRENT_ANNAS_ARCHIVE_URL=https://annas-archive.li/dyn/generate_torrents

# Directory for torrent downloads and seeding
TORRENT_DATA_DIR=./data/torrents

# Maximum storage limit for torrents (in TB)
TORRENT_MAX_TB=1.0

# ============================================================================
# WORMHOLE SERVICE (P2P Transfers)
# ============================================================================

# Enable Wormhole service
WORMHOLE_ENABLED=true

# Cleanup configuration
WORMHOLE_CLEANUP_ENABLED=true
WORMHOLE_CLEANUP_INTERVAL_MS=3600000
WORMHOLE_MAX_AGE_SECS=86400

# ============================================================================
# PRICING CONFIGURATION
# ============================================================================

# Storage Deals Pricing (per MB per month in USDC)
# DEAL_PRICE_STANDARD=0.0001      # Standard tier price per MB/month
# DEAL_PRICE_PREMIUM=0.0002       # Premium tier price per MB/month
# DEAL_PRICE_ENTERPRISE=0.0005    # Enterprise tier price per MB/month

# Deal size and duration limits
# DEAL_MIN_SIZE_MB=0.001          # Minimum file size (1 KB)
# DEAL_MAX_SIZE_MB=1000           # Maximum file size for standard tier
# DEAL_MIN_DURATION_DAYS=7        # Minimum deal duration
# DEAL_MAX_DURATION_DAYS=365      # Maximum deal duration for standard tier

# Premium/Enterprise replication factors
# DEAL_PREMIUM_REPLICATION=3      # Replication factor for premium tier
# DEAL_ENTERPRISE_REPLICATION=5   # Replication factor for enterprise tier

# Subscription Pricing (one-time payment in USDC)
# SUB_BASIC_PRICE=0.001           # Basic subscription price
# SUB_BASIC_STORAGE_MB=100        # Basic subscription storage (MB)
# SUB_STANDARD_PRICE=0.004        # Standard subscription price
# SUB_STANDARD_STORAGE_MB=500     # Standard subscription storage (MB)
# SUB_PREMIUM_PRICE=0.01          # Premium subscription price
# SUB_PREMIUM_STORAGE_MB=2000     # Premium subscription storage (MB)
# SUB_DURATION_DAYS=30            # Subscription duration (days)

# ============================================================================
# STORAGE LIMITS
# ============================================================================

# Maximum total storage available on this relay (in GB)
# If not set or 0, no global limit is enforced
RELAY_MAX_STORAGE_GB=10

# Warning threshold percentage (default 80%)
# Users will be warned when relay storage exceeds this percentage
RELAY_STORAGE_WARNING_THRESHOLD=80

# ============================================================================
# NETWORK FEDERATION
# ============================================================================

# Automatically pin content from network pin requests
# Helps with data redundancy across the network
AUTO_REPLICATION=true

# ============================================================================
# DRIVE SERVICE
# ============================================================================

# Directory for general file storage (File Manager)
DRIVE_DATA_DIR=./data/drive

# ============================================================================
# HOLSTER RELAY (WebSocket enhancement)
# ============================================================================

# Holster relay host address
HOLSTER_RELAY_HOST=0.0.0.0

# Holster relay port (default: RELAY_PORT + 1)
# HOLSTER_RELAY_PORT=8766

# Enable persistent storage for Holster
HOLSTER_RELAY_STORAGE=true

# Path for Holster data
HOLSTER_RELAY_STORAGE_PATH=./holster-data

# Maximum connections for Holster
HOLSTER_MAX_CONNECTIONS=100

# ============================================================================
# LOGGING & DEBUG
# ============================================================================

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Enable debug mode
DEBUG=false

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# CORS Configuration
# Comma-separated list of allowed origins (use * for development only)
# CORS_ORIGINS=https://myapp.com,https://admin.myapp.com
CORS_ORIGINS=*

# Allow credentials (cookies, auth headers) in CORS requests
CORS_CREDENTIALS=false

# Enforce strict session IP binding (recommended: true)
STRICT_SESSION_IP=true
